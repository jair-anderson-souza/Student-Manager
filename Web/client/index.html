<!DOCTYPE html>
<html lang="en" ng-app="App">
<head>
	<title>Student Manager</title>
	<meta charset="utf-8">	
	<script src="assets/lib/angular/angular.min.js" type="text/javascript"></script>
	<script src="assets/lib/angular/angular-messages.min.js" type="text/javascript"></script>
	<script src="assets/lib/angular/angular-route.min.js" type="text/javascript"></script>
	<link rel="stylesheet" href="assets/lib/bootstrap/dist/css/bootstrap.css">
	<!--<script src="App.js"></script>-->
	<!--
	<script src="assets/lib/bootstrap/dist/js/bootstrap.min.js"></script>
	<script src="assets/lib/bootstrap/dist/js/bootstrap.js"></script>

	<link type="text/css" href="/assets/lib/bootstrap/dist/css/bootstrap.css">
	<script type="text/javascript" src="/assets/lib/angular/angular.min.js"></script>


		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	--> 
	<!-- jQuery library 
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>	
	-->
	<!-- Latest compiled JavaScript 
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	-->

	<script>
		
		var app = angular.module("App", ["ngMessages"]);

		app.controller("AppCtrl", function($scope, $http){
			
			$scope.students = [
				{id: 1, cpf: "823782734", gender: "MALE", identifyNumber : "289374829374", militaryDocumentNumber: "2874683745", nacionality: "BRAZIL", birthday: "10/10/2010", name: "Anderson"}
			];

			$scope.genders = [{desc: "MALE"}, {desc: "FEMALE"}];

			$scope.addStudent = function(student){
				console.log(student);
				$scope.students.push(student);
				delete $scope.student;
				$scope.studentForm.$setPristine();
			};

			var loadStudents = function(){
				$http.get("http://localhost:8080/WebServices/webapi/student").then(function(response){
					console.log(response.data);
					$scope.students = response.data;
					/**console.log(response.status);
					console.log(response.statusText);
					console.log(response.config);
					console.log(response.headers);**/
				}), function(response){
					console.log("erro");
				};

			};

			loadStudents();

		});


	</script>

</head>
<body ng-controller="AppCtrl">
	<div class="container">
		<table class="table">
			<thead>		
				<tr>
					<th>Name</th>
					<th>CPF</th>
					<th>Gender</th>
					<th>Identify Number</th>
					<th>Military Document Number</th>
					<th>Nacionality</th>
					<th>Birthday</th>
				</tr>
			</thead>
		<tbody>
			<tr ng-repeat="student in students">
				<td>{{student.name | uppercase}}</td>
				<td>{{student.cpf}}</td>
				<td>{{student.gender}}</td>
				<td>{{student.identifyNumber}}</td>
				<td>{{student.militaryDocumentNumber}}</td>
				<td>{{student.nacionality}}</td>
				<td>{{student.birthday}}</td>
			</tr>
		</tbody>
		</table>
	<hr>

		<form name="studentForm" class="form-horizontal">
			
			<div class="form-group">
				<label class="control-label">Name</label>
				<input class="form-control" type="text" ng-model="student.name" ng-required="true" name="name">
				<div ng-if="studentForm.name.$dirty" ng-messages="studentForm.name.$error">
					<div ng-message="required" class="alert alert-danger">
						Please fill out this field.
					</div>
				</div>
			</div>
			
			<div class="form-group">
				<label class="control-label">CPF</label>
				<input type="text" class="form-control" ng-model="student.cpf" name="cpf" ng-required="true" ng-pattern="/^\d{9}-\d{2}$/">
				
				<div ng-if="studentForm.cpf.$dirty" ng-messages="studentForm.cpf.$error">
					<div class="alert alert-danger" ng-message="required">
						Please fill out this field.	
					</div>
					<div ng-message="pattern" class="alert alert-danger">
						Format: XXXXXXXXX-XX
					</div>
				</div>
			</div>

			<div class="form-group">
				<label class="control-label">Gender</label>
				<select ng-model="student.gender" name="gender" ng-required="true" class="form-control" ng-options="gender.desc for gender in genders">
					<option value="">Select a gender</option>
				</select>
				
				<div ng-if="studentForm.gender.$dirty" ng-messages="studentForm.gender.$error">
					<div class="alert alert-danger" ng-message="required">
						Please select out this field.	
					</div>
				</div>
			</div>
			
			<div class="form-group">
				<label class="control-label">Identify Number</label>
				<input class="form-control" type="text" ng-model="student.identifyNumber" ng-required="true" 
				ng-pattern="/^\d{13}$/" name="identifyNumber">
				
				<div ng-if="studentForm.identifyNumber.$dirty" ng-messages="studentForm.identifyNumber.$error">
					<div class="alert alert-danger" ng-message="required">
						Please select out this field.	
					</div>
					<div class="alert alert-danger" ng-message="pattern">
						Only permitted until 13 characters	
					</div>
				</div>
			</div>

			<div class="form-group">
				<label class="control-label">Military Document Number</label>
				<input type="text" class="form-control" ng-model="student.militaryDocumentNumber" name="militaryDocumentNumber" ng-required="true">
				<div ng-if="studentForm.militaryDocumentNumber.$dirty" ng-messages="studentForm.militaryDocumentNumber.$error">
					<div class="alert alert-danger" ng-message="required">
						Please fill out this field.	
					</div>
				</div>
			</div>
			
			<div class="form-group">
				<label class="control-label">Nacionality</label>
				<input class="form-control" type="text" ng-model="student.nacionality" name="nacionality" ng-required="true">
				<div ng-if="studentForm.nacionality.$dirty" ng-messages="studentForm.nacionality.$error">
					<div class="alert alert-danger" ng-message="required">
						Please fill out this field.	
					</div>
				</div>
			</div>
			
			<div class="form-group">
				<label class="control-label">Birthday</label>
				<input class="form-control" type="text" ng-model="student.birthday" ng-required="true" name="birthday">
				<div ng-if="studentForm.birthday.$dirty" ng-messages="studentForm.birthday.$error">
					<div class="alert alert-danger" ng-message="required">
						Please fill out this field.	
					</div>
				</div>
			</div>
			<button class="btn btn-primary" ng-click="addStudent(student);" ng-disabled="studentForm.$invalid">Submit</button>
		</form>
		
		
	</div>

</body>
</html>